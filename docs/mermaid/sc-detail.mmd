flowchart TD
    subgraph "ğŸ›ï¸ Ecossistema Smart Contract IDBraDIDRegistry"
        subgraph "ğŸ“‹ Contrato Principal"
            IDR["ğŸ“‹ IDBraDIDRegistry<br/>EndereÃ§o: 0x...<br/>Rede: Ethereum"]
        end

        subgraph "ğŸ†” FunÃ§Ãµes de GestÃ£o DID"
            F1["ğŸ”§ criarDID()<br/>â€¢ Registrar novo DID<br/>â€¢ Gerar documento DID<br/>â€¢ Emitir evento DIDCriado"]
            F2["ğŸ“ atualizarDocumentoDID()<br/>â€¢ Modificar documento<br/>â€¢ Validar permissÃµes<br/>â€¢ Emitir evento DIDAtualizado"]
            F3["ğŸ” resolverDID()<br/>â€¢ Buscar documento<br/>â€¢ Retornar metadados<br/>â€¢ Verificar existÃªncia"]
            F4["âŒ desativarDID()<br/>â€¢ Marcar como inativo<br/>â€¢ Revogar acesso<br/>â€¢ Emitir evento DIDDesativado"]
        end

        subgraph "ğŸ“œ FunÃ§Ãµes de Credenciais"
            C1["âœ… emitirCredencial()<br/>â€¢ Registrar hash SHA-256<br/>â€¢ Validar emissor autorizado<br/>â€¢ Emitir evento CredentialEmitida"]
            C2["âŒ revogarCredencial()<br/>â€¢ Marcar como revogada<br/>â€¢ Registrar motivo<br/>â€¢ Emitir evento CredentialRevogada"]
            C3["ğŸ”„ restaurarCredencial()<br/>â€¢ Remover revogaÃ§Ã£o<br/>â€¢ Validar permissÃµes<br/>â€¢ Emitir evento CredentialRestaurada"]
            C4["ğŸ” verificarStatusCredencial()<br/>â€¢ Consultar se revogada<br/>â€¢ Retornar booleano<br/>â€¢ Acesso pÃºblico"]
            C5["ğŸ“‹ obterDetalhesRevogacao()<br/>â€¢ Buscar registro completo<br/>â€¢ Retornar struct RevocationRecord<br/>â€¢ Incluir timestamp e motivo"]
        end

        subgraph "ğŸ”‘ FunÃ§Ãµes de Atributos"
            A1["â• adicionarAtributo()<br/>â€¢ Registrar novo atributo<br/>â€¢ Validar proprietÃ¡rio<br/>â€¢ Emitir evento AtributoAdicionado"]
            A2["âŒ revogarAtributo()<br/>â€¢ Invalidar atributo<br/>â€¢ Registrar motivo<br/>â€¢ Emitir evento AtributoRevogado"]
            A3["âœ… validarAtributo()<br/>â€¢ Verificar validade<br/>â€¢ Checar revogaÃ§Ã£o<br/>â€¢ Retornar status"]
        end

        subgraph "ğŸ‘¥ FunÃ§Ãµes de Controle de Acesso"
            R1["ğŸ‘‘ concederPapelEmissor()<br/>â€¢ Adicionar emissor autorizado<br/>â€¢ Validar admin<br/>â€¢ Emitir evento PapelConcedido"]
            R2["âŒ revogarPapelEmissor()<br/>â€¢ Remover autorizaÃ§Ã£o<br/>â€¢ Validar permissÃµes<br/>â€¢ Emitir evento PapelRevogado"]
            R3["ğŸ” verificarPapelEmissor()<br/>â€¢ Consultar autorizaÃ§Ã£o<br/>â€¢ Retornar booleano<br/>â€¢ Acesso pÃºblico"]
            R4["âš™ï¸ configurarAdmin()<br/>â€¢ Definir administrador<br/>â€¢ Transferir propriedade<br/>â€¢ Emitir evento AdminAlterado"]
        end
    end

    subgraph "ğŸ“Š Estruturas de Dados"
        subgraph "ğŸ†” Documento DID"
            DD["ğŸ“„ DocumentoDID<br/>â€¢ id: bytes32<br/>â€¢ documento: string (JSON)<br/>â€¢ proprietario: address<br/>â€¢ ativo: bool<br/>â€¢ timestampCriacao: uint256<br/>â€¢ timestampAtualizacao: uint256"]
        end

        subgraph "ğŸ“œ Registro de Credencial"
            CR["ğŸ“‹ RegistroCredencial<br/>â€¢ hashCredencial: bytes32<br/>â€¢ emissor: address<br/>â€¢ portador: address<br/>â€¢ timestampEmissao: uint256<br/>â€¢ ativo: bool"]
        end

        subgraph "âŒ Registro de RevogaÃ§Ã£o"
            RR["ğŸ“‹ RegistroRevogacao<br/>â€¢ revogada: bool<br/>â€¢ timestamp: uint256<br/>â€¢ revogador: address<br/>â€¢ motivo: string<br/>â€¢ hashCredencial: bytes32"]
        end

        subgraph "ğŸ”‘ Registro de Atributo"
            AR["ğŸ“‹ RegistroAtributo<br/>â€¢ nome: bytes32<br/>â€¢ valor: bytes<br/>â€¢ proprietario: address<br/>â€¢ valido: bool<br/>â€¢ timestampCriacao: uint256"]
        end
    end

    subgraph "ğŸ“¡ Eventos Emitidos"
        E1["ğŸ“¢ DIDCriado(bytes32 id, address proprietario)"]
        E2["ğŸ“¢ CredentialEmitida(bytes32 hash, address emissor)"]
        E3["ğŸ“¢ CredentialRevogada(bytes32 hash, string motivo)"]
        E4["ğŸ“¢ AtributoAdicionado(bytes32 nome, address proprietario)"]
        E5["ğŸ“¢ PapelConcedido(address emissor, address admin)"]
    end

    subgraph "ğŸ”’ Modificadores de SeguranÃ§a"
        M1["ğŸ›¡ï¸ apenasEmissorAutorizado<br/>â€¢ Valida papel de emissor<br/>â€¢ Bloqueia nÃ£o autorizados"]
        M2["ğŸ›¡ï¸ apenasProprietario<br/>â€¢ Valida propriedade DID<br/>â€¢ Controla acesso"]
        M3["ğŸ›¡ï¸ apenasAdmin<br/>â€¢ Valida papel admin<br/>â€¢ FunÃ§Ãµes administrativas"]
        M4["ğŸ›¡ï¸ didExiste<br/>â€¢ Verifica existÃªncia DID<br/>â€¢ Previne erros"]
    end

    %% ConexÃµes entre funÃ§Ãµes e estruturas
    F1 --> DD
    F2 --> DD
    F3 --> DD

    C1 --> CR
    C2 --> RR
    C3 --> RR
    C4 --> RR
    C5 --> RR

    A1 --> AR
    A2 --> AR
    A3 --> AR

    %% ConexÃµes com eventos
    F1 --> E1
    C1 --> E2
    C2 --> E3
    A1 --> E4
    R1 --> E5

    %% ConexÃµes com modificadores
    C1 -.-> M1
    C2 -.-> M1
    F1 -.-> M2
    F2 -.-> M2
    R1 -.-> M3
    R4 -.-> M3
    F3 -.-> M4

    classDef contractStyle fill:#000,stroke:#fff,stroke-width:3px,color:#fff
    classDef didFunctionStyle fill:#1a1a2e,stroke:#fff,stroke-width:2px,color:#fff
    classDef credentialFunctionStyle fill:#16213e,stroke:#fff,stroke-width:2px,color:#fff
    classDef attributeFunctionStyle fill:#0f3460,stroke:#fff,stroke-width:2px,color:#fff
    classDef accessFunctionStyle fill:#533483,stroke:#fff,stroke-width:2px,color:#fff
    classDef dataStyle fill:#444,stroke:#fff,stroke-width:2px,color:#fff
    classDef eventStyle fill:#666,stroke:#fff,stroke-width:2px,color:#fff
    classDef modifierStyle fill:#888,stroke:#fff,stroke-width:2px,color:#fff

    class IDR contractStyle
    class F1,F2,F3,F4 didFunctionStyle
    class C1,C2,C3,C4,C5 credentialFunctionStyle
    class A1,A2,A3 attributeFunctionStyle
    class R1,R2,R3,R4 accessFunctionStyle
    class DD,CR,RR,AR dataStyle
    class E1,E2,E3,E4,E5 eventStyle
    class M1,M2,M3,M4 modifierStyle
